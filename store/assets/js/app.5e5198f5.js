(function(t){function e(e){for(var a,i,o=e[0],r=e[1],c=e[2],u=0,m=[];u<o.length;u++)i=o[u],Object.prototype.hasOwnProperty.call(l,i)&&l[i]&&m.push(l[i][0]),l[i]=0;for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a]);d&&d(e);while(m.length)m.shift()();return n.push.apply(n,c||[]),s()}function s(){for(var t,e=0;e<n.length;e++){for(var s=n[e],a=!0,o=1;o<s.length;o++){var r=s[o];0!==l[r]&&(a=!1)}a&&(n.splice(e--,1),t=i(i.s=s[0]))}return t}var a={},l={app:0},n=[];function i(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=a,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(s,a,function(e){return t[e]}.bind(null,a));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],r=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var d=r;n.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"56d7":function(t,e,s){"use strict";s.r(e);s("e260"),s("e6cf"),s("cca6"),s("a79d");var a=s("2b0e"),l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("div",{staticClass:"mdl-layout mdl-js-layout mdl-layout--fixed-header"},[t._m(0),t._m(1),s("Main")],1),s("dialogs")],1)},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("header",{staticClass:"mdl-layout__header"},[s("div",{staticClass:"mdl-layout__header-row"},[s("span",{staticClass:"mdl-layout-title"},[t._v("TM Card Planning Pocker")]),s("div",{staticClass:"mdl-layout-spacer"}),s("nav",{staticClass:"mdl-navigation mdl-layout--large-screen-only"})])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mdl-layout__drawer"},[s("span",{staticClass:"mdl-layout-title"},[t._v("TMCPP")]),s("nav",{staticClass:"mdl-navigation"})])}],i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("main",{staticClass:"mdl-layout__content"},[s("div",{staticClass:"page-content"},[s("div",{staticClass:"mdl-grid"},[s("div",{staticClass:"demo-card-wide mdl-card mdl-shadow--2dp mdl-cell mdl-cell--12-col"},[s("div",{staticClass:"mdl-card__title"},[s("h3",{staticClass:"mdl-card__title-text"},[s("span",{attrs:{id:"room_marker"}},[t.room?s("b",[t._v("ROOM "+t._s(t.room.toUpperCase()))]):t._e()])])]),s("div",{staticClass:"mdl-card__supporting-text"},[t._v(" Write topic and click start to indicate discussion starts. ")]),s("div",{staticClass:"mdl-card__actions mdl-card--border"}),s("Topic"),s("Cards"),s("Users"),s("Repo"),s("div",{staticClass:"mdl-card__actions mdl-card--border"},[s("a",{staticClass:"mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect",on:{click:t.onChangeNameClick}},[t._v(" Change name ")]),t.repoConnect&&!t.iAmRepoConnect?s("a",{staticClass:"mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect",attrs:{disabled:"true"}},[t._v(" Repo connected ")]):s("a",{staticClass:"mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect",on:{click:t.onConnectRepoClick}},[t._v(" Connect repo ")])]),s("Menu")],1)])])])},o=[],r=(s("b0c0"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mdl-grid mdl-cell mdl-cell--12-col"},[a("table",{staticClass:"mdl-data-table mdl-js-data-table mdl-shadow--2dp mdl-cell mdl-cell--12-col",attrs:{id:"table"}},[t._m(0),t.instance?a("tbody",{attrs:{id:"table_body"}},t._l(t.instance.players,(function(e,l,n){return a("tr",{key:"ind-"+l+"-"+n},[a("td",{staticClass:"width-fixed-50"},[t._v(t._s(n+1))]),e.repoConnect?a("td",{staticClass:"width-minus-100"},[t._v(t._s(e.name)+"(connected repo)")]):a("td",{staticClass:"width-minus-100"},[t._v(t._s(e.name))]),""===e.vote&&"discuss"===t.discuss?a("td",{staticClass:"width-fixed-50"},[a("img",{staticClass:"wait-throbber",attrs:{src:s("f191")}})]):"discuss"===t.discuss&&t.anyUnvoted?a("td",{staticClass:"width-fixed-50"},[a("span",{staticClass:"material-icons"},[t._v("done")])]):a("td",{staticClass:"width-fixed-50"},[t._v(" "+t._s(e.vote)+" ")])])})),0):t._e()])])}),c=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",{staticClass:"width-fixed-50"},[t._v("â„–")]),s("th",{staticClass:"width-minus-100"},[t._v("Name")]),s("th",{staticClass:"width-fixed-50"},[t._v("Vote")])])])}],d={name:"Users",computed:{instance:function(){return this.$store.state.instance},anyUnvoted:function(){return this.$store.state.anyUnvoted},discuss:function(){return this.$store.state.discuss}}},u=d,m=s("2877"),p=Object(m["a"])(u,r,c,!1,null,null,null),h=p.exports,b=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mdl-grid mdl-cell mdl-cell--12-col"},[s("button",{staticClass:"mdl-button mdl-card-pocker-card mdl-shadow--2dp mdl-cell mdl-cell--1-col",attrs:{disabled:"0.5"===t.vote||!t.canBeEnabled,"data-value":"0.5"},on:{click:t.onClick}},[t._v(" 1/2 ")]),s("button",{staticClass:"mdl-button mdl-card-pocker-card mdl-shadow--2dp mdl-cell mdl-cell--1-col",attrs:{disabled:"1"===t.vote||!t.canBeEnabled,"data-value":"1"},on:{click:t.onClick}},[t._v(" 1 ")]),s("button",{staticClass:"mdl-button mdl-card-pocker-card mdl-shadow--2dp mdl-cell mdl-cell--1-col",attrs:{disabled:"2"===t.vote||!t.canBeEnabled,"data-value":"2"},on:{click:t.onClick}},[t._v(" 2 ")]),s("button",{staticClass:"mdl-button mdl-card-pocker-card mdl-shadow--2dp mdl-cell mdl-cell--1-col",attrs:{disabled:"3"===t.vote||!t.canBeEnabled,"data-value":"3"},on:{click:t.onClick}},[t._v(" 3 ")]),s("button",{staticClass:"mdl-button mdl-card-pocker-card mdl-shadow--2dp mdl-cell mdl-cell--1-col",attrs:{disabled:"5"===t.vote||!t.canBeEnabled,"data-value":"5"},on:{click:t.onClick}},[t._v(" 5 ")]),s("button",{staticClass:"mdl-button mdl-card-pocker-card mdl-shadow--2dp mdl-cell mdl-cell--1-col",attrs:{disabled:"8"===t.vote||!t.canBeEnabled,"data-value":"8"},on:{click:t.onClick}},[t._v(" 8 ")]),s("button",{staticClass:"mdl-button mdl-card-pocker-card mdl-shadow--2dp mdl-cell mdl-cell--1-col",attrs:{disabled:"13"===t.vote||!t.canBeEnabled,"data-value":"13"},on:{click:t.onClick}},[t._v(" 13 ")]),s("button",{staticClass:"mdl-button mdl-card-pocker-card mdl-shadow--2dp mdl-cell mdl-cell--1-col",attrs:{disabled:"20"===t.vote||!t.canBeEnabled,"data-value":"20"},on:{click:t.onClick}},[t._v(" 20 ")]),s("button",{staticClass:"mdl-button mdl-card-pocker-card mdl-shadow--2dp mdl-cell mdl-cell--1-col",attrs:{disabled:"40"===t.vote||!t.canBeEnabled,"data-value":"40"},on:{click:t.onClick}},[t._v(" 40 ")]),s("button",{staticClass:"mdl-button mdl-card-pocker-card mdl-shadow--2dp mdl-cell mdl-cell--1-col",attrs:{disabled:"100"===t.vote||!t.canBeEnabled,"data-value":"100"},on:{click:t.onClick}},[t._v(" 100 ")]),s("button",{staticClass:"mdl-button mdl-card-pocker-card mdl-shadow--2dp mdl-cell mdl-cell--1-col",attrs:{disabled:"?"===t.vote||!t.canBeEnabled,"data-value":"?"},on:{click:t.onClick}},[t._v(" ? ")]),s("button",{staticClass:"mdl-button mdl-card-pocker-card mdl-shadow--2dp mdl-cell mdl-cell--1-col",attrs:{disabled:"break"===t.vote||!t.canBeEnabled,"data-value":"break"},on:{click:t.onClick}},[s("span",{staticClass:"material-icons",attrs:{"data-value":"break"}},[t._v(" free_breakfast ")])])])},v=[],f={name:"Cards",methods:{onClick:function(t){if(this.canBeEnabled){var e=t.target,s=e.getAttribute("data-value");this.$store.state.socket.emit("update",this.$store.state.room,"vote",s)}}},computed:{vote:function(){return this.$store.state.vote},canBeEnabled:function(){return"discuss"===this.$store.state.discuss&&this.$store.state.anyUnvoted}}},g=f,_=Object(m["a"])(g,b,v,!1,null,null,null),C=_.exports,k=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mdl-grid mdl-cell mdl-cell--12-col"},[s("div",{staticClass:"mdl-textfield mdl-js-textfield mdl-textfield--floating-label mdl-cell mdl-cell--11-col"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.topic,expression:"topic"}],staticClass:"mdl-textfield__input",attrs:{type:"text",id:"topic",name:"topic"},domProps:{value:t.topic},on:{blur:t.onBlur,keypress:t.onKeyPress,change:t.onChange,input:function(e){e.target.composing||(t.topic=e.target.value)}}}),s("label",{staticClass:"mdl-textfield__label",attrs:{for:"topic"}},[t._v("Topic...")])]),s("button",{staticClass:"mdl-button mdl-card-pocker-card mdl-shadow--2dp mdl-cell mdl-cell--1-col",attrs:{disabled:!t.validTopic},on:{click:t.onReferenceClick}},[s("span",{staticClass:"material-icons"},[t._v(" open_in_new ")])])])},w=[],y=(s("d3b7"),s("3ca3"),s("ddb0"),s("2b3d"),{name:"Topic",methods:{validUrl:function(t){try{new URL(t)}catch(e){return!1}return!0},onBlur:function(t){this.handleEvent(t)},onKeyPress:function(t){13===t.keyCode&&(this.handleEvent(t),t.target.blur(),t.target.parentNode.classList.remove("is-focused"))},handleEvent:function(t){this.$store.dispatch("setTopic",t.target.value)},onChange:function(t){this.handleClasses(t.target,t.target.value)},handleClasses:function(t,e){e?t.parentNode.classList.add("is-dirty"):t.parentNode.classList.remove("is-dirty")},onReferenceClick:function(t){var e=this.$store.state.topic;if(e&&this.validUrl(e)){var s=window.open(e,"_blank");s.focus()}}},computed:{room:function(){return this.$store.state.room},topic:{get:function(){var t=document.getElementById("topic");return t&&this.handleClasses(document.getElementById("topic"),this.$store.state.topic),this.$store.state.topic},set:function(t){}},validTopic:function(){return this.$store.state.topic&&this.validUrl(this.$store.state.topic)}}}),x=y,$=Object(m["a"])(x,k,w,!1,null,null,null),R=$.exports,j=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mdl-card__menu"},[t.time?s("span",{attrs:{id:"timer"}},[t._v(t._s(t.time))]):t._e(),"result"===t.discuss||"discuss"===t.discuss&&!t.anyUnvoted?s("button",{staticClass:"mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect",attrs:{id:"discuss"},on:{click:t.onDiscussClick}},[t._v(" Clear data ")]):"discuss"===t.discuss?s("button",{staticClass:"mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect",attrs:{id:"discuss"},on:{click:t.onDiscussClick}},[t._v(" Stop discussion ")]):s("button",{staticClass:"mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect",attrs:{disabled:!t.topic&&"idle"===t.discuss,id:"discuss"},on:{click:t.onDiscussClick}},[t._v(" Start discussion ")])])},T=[],D={name:"Menu",computed:{time:function(){return this.$store.state.time},discuss:function(){return this.$store.state.discuss},anyUnvoted:function(){return this.$store.state.anyUnvoted},topic:function(){return this.$store.state.topic}},methods:{onDiscussClick:function(t){"idle"===this.$store.state.discuss?this.$store.state.socket.emit("discuss",this.$store.state.room,"discuss"):"discuss"===this.$store.state.discuss&&this.$store.state.anyUnvoted?this.$store.state.socket.emit("discuss",this.$store.state.room,"result"):this.$store.state.socket.emit("clear",this.$store.state.room)}}},I=D,O=Object(m["a"])(I,j,T,!1,null,null,null),E=O.exports,U=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.iAmRepoConnect?s("div",{staticClass:"mdl-grid mdl-cell mdl-cell--12-col"},[s("button",{staticClass:"mdl-button mdl-card-pocker-card mdl-shadow--2dp mdl-cell mdl-cell--1-col",attrs:{disabled:!t.repos.length}},[s("span",{staticClass:"material-icons"},[t._v(" keyboard_arrow_left ")])]),t.repos.length?s("div",{staticClass:"mdl-textfield mdl-js-textfield mdl-textfield--floating-label getmdl-select mdl-cell mdl-cell--5-col"},[s("input",{staticClass:"mdl-textfield__input",attrs:{type:"text",value:"",id:"repo",readonly:""},on:{change:t.repoChange}}),s("input",{attrs:{type:"hidden",value:"",name:"repo"}}),s("label",{staticClass:"mdl-textfield__label",attrs:{for:"repo"}},[t._v("Repo...")]),s("ul",{staticClass:"mdl-menu mdl-menu--bottom-left mdl-js-menu",attrs:{for:"repo"}},t._l(t.repos,(function(e,a){return s("li",{key:"ind-"+e.id+"-"+a,staticClass:"mdl-menu__item",attrs:{"data-val":e.name}},[t._v(t._s(e.name))])})),0)]):t._e(),s("button",{staticClass:"mdl-button mdl-card-pocker-card mdl-shadow--2dp mdl-cell mdl-cell--1-col",attrs:{disabled:!t.repos.length}},[s("span",{staticClass:"material-icons"},[t._v(" keyboard_arrow_right ")])]),t.labels.length?s("div",{staticClass:"mdl-grid mdl-cell mdl-cell--12-col"},t._l(t.labels,(function(e,a){return s("button",{key:"ind-"+e.id+"-"+a,staticClass:"mdl-button mdl-shadow--2dp mdl-cell mdl-cell--1-col",style:{background:"#"+e.color},attrs:{disabled:!t.topicIssue,"data-label":e.name},on:{click:t.setLabel}},[t._v(" "+t._s(e.name)+" ")])})),0):t._e(),t.topicIssue?s("div",{staticClass:"mdl-grid mdl-cell mdl-cell--12-col"},[s("div",{staticClass:"mdl-card mdl-cell--12-col",staticStyle:{"min-height":"auto"}},[s("div",{staticClass:"mdl-card__title"},[s("h2",{staticClass:"mdl-card__title-text"},[t._v(t._s("Topic:"+t.topicIssue.number+" / "+t.repo+" / "+t.topicIssue.state))])]),s("div",{staticClass:"mdl-card__supporting-text"},[t._v(" "+t._s(t.topicIssue.title)+" ")]),s("div",{staticClass:"mdl-card__actions mdl-card--border"},[s("div",{staticClass:"mdl-card mdl-shadow--2dp mdl-cell--12-col"},[s("div",{staticClass:"mdl-card__supporting-text",domProps:{innerHTML:t._s(t.renderMd(t.topicIssue.body))}})])]),s("div",{staticClass:"mdl-card__menu"})]),t.topicIssue.labels.length?s("div",{staticClass:"mdl-grid mdl-cell mdl-cell--12-col"},t._l(t.topicIssue.labels,(function(e,a){return s("button",{key:"ind-"+e.id+"-"+a,staticClass:"mdl-button mdl-shadow--2dp mdl-cell mdl-cell--2-col",style:{background:"#"+e.color}},[t._v(" "+t._s(e.name)+" ")])})),0):t._e()]):s("div",{staticClass:"mdl-grid mdl-cell mdl-cell--12-col"},[t._v(" No issue is selected as topic yet. ")]),t.issues.length?s("div",{staticClass:"mdl-grid mdl-cell mdl-cell--12-col"},t._l(t.issues,(function(e,a){return s("div",{key:"ind-"+e.number+"-"+a,staticClass:"mdl-card mdl-cell--12-col",staticStyle:{"min-height":"auto"}},[s("div",{staticClass:"mdl-card__title"},[s("h2",{staticClass:"mdl-card__title-text"},[t._v(t._s(e.number+" / "+t.repo+" / "+e.state))])]),s("div",{staticClass:"mdl-card__supporting-text"},[t._v(" "+t._s(e.title)+" ")]),s("div",{staticClass:"mdl-card__actions mdl-card--border"},[s("div",{staticClass:"mdl-card mdl-shadow--2dp mdl-cell--12-col",staticStyle:{display:"none"},attrs:{id:"ind-"+e.number+"-"+a}},[s("div",{staticClass:"mdl-card__supporting-text",domProps:{innerHTML:t._s(t.renderMd(e.body))}})])]),s("div",{staticClass:"mdl-card__menu"},[s("button",{staticClass:"mdl-button mdl-button--colored mdl-js-buttont",attrs:{"data-index":a},on:{click:t.setTopic}},[t._v(" Set topic ")]),s("button",{staticClass:"mdl-button mdl-button--colored mdl-js-button",attrs:{"data-toggle":"ind-"+e.number+"-"+a},on:{click:t.doToggle}},[t._v(" Details ")]),s("button",{staticClass:"mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect"},[s("a",{staticStyle:{color:"gray"},attrs:{href:e.html_url}},[s("span",{staticClass:"material-icons"},[t._v(" open_in_new ")])])])])])})),0):t._e()]):s("div",{staticClass:"mdl-grid mdl-cell mdl-cell--12-col"},[t.labels.length?s("div",{staticClass:"mdl-grid mdl-cell mdl-cell--12-col"},t._l(t.labels,(function(e,a){return s("button",{key:"ind-"+e.id+"-"+a,staticClass:"mdl-button mdl-shadow--2dp mdl-cell mdl-cell--1-col",style:{background:"#"+e.color},attrs:{disabled:!t.topicIssue,"data-label":e.name},on:{click:t.setLabel}},[t._v(" "+t._s(e.name)+" ")])})),0):t._e(),t.topicIssue?s("div",{staticClass:"mdl-grid mdl-cell mdl-cell--12-col"},[s("div",{staticClass:"mdl-card mdl-cell--12-col",staticStyle:{"min-height":"auto"}},[s("div",{staticClass:"mdl-card__title"},[s("h2",{staticClass:"mdl-card__title-text"},[t._v(t._s("Topic:"+t.topicIssue.number+" / "+t.repo+" / "+t.topicIssue.state))])]),s("div",{staticClass:"mdl-card__supporting-text"},[t._v(" "+t._s(t.topicIssue.title)+" ")]),s("div",{staticClass:"mdl-card__actions mdl-card--border"},[s("div",{staticClass:"mdl-card mdl-shadow--2dp mdl-cell--12-col"},[s("div",{staticClass:"mdl-card__supporting-text",domProps:{innerHTML:t._s(t.renderMd(t.topicIssue.body))}})])]),s("div",{staticClass:"mdl-card__menu"})]),t.topicIssue.labels.length?s("div",{staticClass:"mdl-grid mdl-cell mdl-cell--12-col"},t._l(t.topicIssue.labels,(function(e,a){return s("button",{key:"ind-"+e.id+"-"+a,staticClass:"mdl-button mdl-shadow--2dp mdl-cell mdl-cell--2-col",style:{background:"#"+e.color}},[t._v(" "+t._s(e.name)+" ")])})),0):t._e()]):s("div",{staticClass:"mdl-grid mdl-cell mdl-cell--12-col"},[t._v(" No issue is selected as topic yet (waiting for issues list). ")]),t.issues.length?s("div",{staticClass:"mdl-grid mdl-cell mdl-cell--12-col"},t._l(t.issues,(function(e,a){return s("div",{key:"ind-"+e.number+"-"+a,staticClass:"mdl-card mdl-cell--12-col",staticStyle:{"min-height":"auto"}},[s("div",{staticClass:"mdl-card__title"},[s("h2",{staticClass:"mdl-card__title-text"},[t._v(t._s(e.number+" / "+t.repo+" / "+e.state))])]),s("div",{staticClass:"mdl-card__supporting-text"},[t._v(" "+t._s(e.title)+" ")]),s("div",{staticClass:"mdl-card__actions mdl-card--border"},[s("div",{staticClass:"mdl-card mdl-shadow--2dp mdl-cell--12-col",staticStyle:{display:"none"},attrs:{id:"ind-"+e.number+"-"+a}},[s("div",{staticClass:"mdl-card__supporting-text",domProps:{innerHTML:t._s(t.renderMd(e.body))}})])]),s("div",{staticClass:"mdl-card__menu"},[s("button",{staticClass:"mdl-button mdl-button--colored mdl-js-button",attrs:{"data-toggle":"ind-"+e.number+"-"+a},on:{click:t.doToggle}},[t._v(" Details ")]),s("button",{staticClass:"mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect"},[s("a",{staticStyle:{color:"gray"},attrs:{href:e.html_url}},[s("span",{staticClass:"material-icons"},[t._v(" open_in_new ")])])])])])})),0):t._e()])},S=[],N=s("d4cd")(),P={name:"Repo",methods:{setLabel:function(t){if(this.topicIssue){var e=t.target.getAttribute("data-label"),s=this.topicIssue.number;this.$store.state.githubCli.setLabels(this.repo,s,[e]).then((function(t){console.log(t)}))}},renderMd:function(t){return N.render(t)},repoChange:function(t){var e=this;console.log(t.target.value),this.$store.dispatch("setRepo",t.target.value),t.target.value&&(this.$store.state.githubCli.getIssues(this.repo).then((function(t){e.$store.dispatch("setIssues",t)})),this.$store.dispatch("setLabels"))},doToggle:function(t){var e=document.getElementById(t.target.getAttribute("data-toggle")),s=e.style.display;e.style.display="none"===s?"block":"none"},setTopic:function(t){var e=t.target.getAttribute("data-index");this.$store.dispatch("setTopicIssue",this.issues[e])}},computed:{repos:function(){return this.$store.state.githubData.repos},repo:function(){return this.$store.state.githubData.repo},iAmRepoConnect:function(){return this.$store.state.iAmRepoConnect},issues:function(){return this.$store.state.githubData.issues},labels:function(){return this.$store.state.githubData.labels},topicIssue:function(){return this.$store.state.githubData.topicIssue}},updated:function(){this.repo||window.getmdlSelect.init(".getmdl-select"),window.componentHandler.upgradeAllRegistered()}},M=P,B=Object(m["a"])(M,U,S,!1,null,null,null),L=B.exports,A={name:"Main",components:{Users:h,Cards:C,Topic:R,Menu:E,Repo:L},computed:{room:function(){return this.$store.state.room},repoConnect:function(){return this.$store.state.repoConnect},iAmRepoConnect:function(){return this.$store.state.iAmRepoConnect}},methods:{onChangeNameClick:function(t){this.$store.state.dialogs.name.showModal()},onConnectRepoClick:function(t){this.$store.state.dialogs.repo.showModal()}}},K=A,H=Object(m["a"])(K,i,o,!1,null,null,null),q=H.exports,J=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",[s("dialog",{ref:"name",staticClass:"mdl-dialog",attrs:{id:"name_dialog"}},[s("h4",{staticClass:"mdl-dialog__title"},[t._v("Name yourself")]),s("div",{staticClass:"mdl-dialog__content"},[s("div",{staticClass:"mdl-textfield mdl-js-textfield mdl-textfield--floating-label"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.userName,expression:"userName"}],staticClass:"mdl-textfield__input",attrs:{type:"text",id:"name",name:"name"},domProps:{value:t.userName},on:{blur:t.onBlur,keypress:t.onKeyPress,input:function(e){e.target.composing||(t.userName=e.target.value)}}}),s("label",{staticClass:"mdl-textfield__label",attrs:{for:"Name"}},[t._v("Name...")])])])]),s("dialog",{ref:"start",staticClass:"mdl-dialog",attrs:{id:"start_dialog"}},[s("h4",{staticClass:"mdl-dialog__title"},[t._v("Starting")]),t._m(0)]),s("dialog",{ref:"error",staticClass:"mdl-dialog",attrs:{id:"error_dialog"}},[s("h4",{staticClass:"mdl-dialog__title"},[t._v("Error")]),t._m(1)]),s("dialog",{ref:"repo",staticClass:"mdl-dialog",attrs:{id:"repo_dialog"}},[s("h4",{staticClass:"mdl-dialog__title"},[t._v("Github credentials")]),s("div",{staticClass:"mdl-dialog__content"},[s("div",{staticClass:"mdl-textfield mdl-js-textfield mdl-textfield--floating-label"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.githubUser,expression:"githubUser"}],staticClass:"mdl-textfield__input",attrs:{type:"text",name:"githubUser"},domProps:{value:t.githubUser},on:{blur:t.onBlurRepo,keypress:t.onKeyPressRepo,input:function(e){e.target.composing||(t.githubUser=e.target.value)}}}),s("label",{staticClass:"mdl-textfield__label",attrs:{for:"githubUser"}},[t._v("Github user name...")])]),s("div",{staticClass:"mdl-textfield mdl-js-textfield mdl-textfield--floating-label"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.githubToken,expression:"githubToken"}],staticClass:"mdl-textfield__input",attrs:{type:"text",name:"githubToken"},domProps:{value:t.githubToken},on:{blur:t.onBlurRepo,keypress:t.onKeyPressRepo,input:function(e){e.target.composing||(t.githubToken=e.target.value)}}}),s("label",{staticClass:"mdl-textfield__label",attrs:{for:"githubToken"}},[t._v("Github token...")])]),s("div",{staticClass:"mdl-textfield mdl-js-textfield mdl-textfield--floating-label"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.owner,expression:"owner"}],staticClass:"mdl-textfield__input",attrs:{type:"text",name:"owner"},domProps:{value:t.owner},on:{blur:t.onBlurRepo,keypress:t.onKeyPressRepo,input:function(e){e.target.composing||(t.owner=e.target.value)}}}),s("label",{staticClass:"mdl-textfield__label",attrs:{for:"owner"}},[t._v("Owner...")])])])])])},G=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mdl-dialog__content"},[s("p",[t._v(" Please wait for connection. ")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mdl-dialog__content"},[s("p",[t._v(" Something went wrong, try reload page. ")])])}],z={name:"Dialogs",mounted:function(){this.$store.dispatch("setDialog",{name:"name",element:this.$refs.name}),this.$store.dispatch("setDialog",{name:"error",element:this.$refs.error}),this.$store.dispatch("setDialog",{name:"start",element:this.$refs.start}),this.$store.dispatch("setDialog",{name:"repo",element:this.$refs.repo})},methods:{onBlur:function(t){this.handleEvent(t)},onKeyPress:function(t){13===t.keyCode&&(this.handleEvent(t),t.target.blur(),t.target.parentNode.classList.remove("is-focused"))},handleEvent:function(t){t.target.value&&(window.localStorage.setItem("pocker_name",t.target.value),this.$store.state.socket.emit("update",this.$store.state.room,"name",t.target.value),this.$refs.name.close())},onBlurRepo:function(t){this.handleEventRepo(t)},onKeyPressRepo:function(t){13===t.keyCode&&(this.handleEventRepo(t),t.target.blur(),t.target.parentNode.classList.remove("is-focused"))},handleEventRepo:function(t){var e=this;if(this.$store.state.githubUser&&this.$store.state.githubToken&&this.$store.state.githubData.owner){var s={u:this.$store.state.githubUser,t:this.$store.state.githubToken,o:this.$store.state.githubData.owner};this.$store.state.githubCli.fromObject(s).then((function(t){window.localStorage.setItem("pocker_data",JSON.stringify(s)),e.$store.dispatch("setRepoConnect",!0),e.$refs.repo.close(),e.$store.state.githubCli.getRepos().then((function(t){e.$store.dispatch("setRepos",t)}))}))}}},computed:{userName:{get:function(){return this.$store.state.userName},set:function(t){}},githubUser:{get:function(){return this.$store.state.githubUser},set:function(t){return this.$store.state.githubUser=t}},githubToken:{get:function(){return this.$store.state.githubToken},set:function(t){this.$store.state.githubToken=t}},owner:{get:function(){return this.$store.state.githubData.owner},set:function(t){this.$store.state.githubData.owner=t}},updated:function(){window.componentHandler.upgradeDom()}}},V=z,W=Object(m["a"])(V,J,G,!1,null,null,null),F=W.exports,Q={name:"App",components:{Main:q,Dialogs:F},mounted:function(){var t=this;this.$store.state.dialogs.start.showModal(),this.$store.dispatch("initRoom").then((function(){t.$store.dispatch("initSocket")}))}},X=Q,Y=(s("5c0b"),Object(m["a"])(X,l,n,!1,null,null,null)),Z=Y.exports,tt=s("2f62"),et=(s("99af"),s("4de4"),s("4160"),s("b64b"),s("ac1f"),s("466d"),s("159b"),s("a562")),st=s("c9df"),at=s.n(st),lt=(s("96cf"),s("1da1")),nt=s("d4ec"),it=s("bee2"),ot=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Object(nt["a"])(this,t),this.user=e,this.token=s,this.endpoint="https://api.github.com",this.owner=a,this.repo=l}return Object(it["a"])(t,[{key:"getUser",value:function(){var t=Object(lt["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",this.request("/user"));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getRepos",value:function(){var t=Object(lt["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",this.request("/orgs/".concat(this.owner,"/repos")));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getLabels",value:function(){var t=Object(lt["a"])(regeneratorRuntime.mark((function t(e){var s,a=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=a.length>1&&void 0!==a[1]?a[1]:1,t.abrupt("return",this.request("/repos/".concat(this.owner,"/").concat(e,"/labels?page=").concat(s)));case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"setLabels",value:function(){var t=Object(lt["a"])(regeneratorRuntime.mark((function t(e,s,a){var l,n,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,l="".concat(this.user,":").concat(this.token),n=btoa(l),t.next=5,fetch("".concat(this.endpoint,"/repos/").concat(this.owner,"/").concat(e,"/issues/").concat(s,"/labels"),{mode:"cors",method:"POST",headers:{Authorization:"Basic "+n},body:JSON.stringify({labels:a})});case 5:return i=t.sent,t.next=8,i.json();case 8:return o=t.sent,t.abrupt("return",o);case 12:return t.prev=12,t.t0=t["catch"](0),t.abrupt("return",null);case 15:case"end":return t.stop()}}),t,this,[[0,12]])})));function e(e,s,a){return t.apply(this,arguments)}return e}()},{key:"getIssues",value:function(){var t=Object(lt["a"])(regeneratorRuntime.mark((function t(e){var s,a=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=a.length>1&&void 0!==a[1]?a[1]:1,t.abrupt("return",this.request("/repos/".concat(this.owner,"/").concat(e,"/issues?page=").concat(s)));case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"request",value:function(){var t=Object(lt["a"])(regeneratorRuntime.mark((function t(e){var s,a,l,n,i,o=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=o.length>1&&void 0!==o[1]?o[1]:{},t.prev=1,a="".concat(this.user,":").concat(this.token),l=btoa(a),s.mode="cors",s.headers={Authorization:"Basic "+l},t.next=8,fetch("".concat(this.endpoint).concat(e),s);case 8:return n=t.sent,t.next=11,n.json();case 11:return i=t.sent,t.abrupt("return",i);case 15:return t.prev=15,t.t0=t["catch"](1),t.abrupt("return",null);case 18:case"end":return t.stop()}}),t,this,[[1,15]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"fromObject",value:function(){var t=Object(lt["a"])(regeneratorRuntime.mark((function t(e){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e!==Object(e)){t.next=10;break}if(!e.hasOwnProperty("u")||!e.hasOwnProperty("t")){t.next=10;break}return this.user=e.u,this.token=e.t,this.owner=e.o,t.next=8,this.getUser();case 8:return s=t.sent,t.abrupt("return",s);case 10:return t.abrupt("return",null);case 13:return t.prev=13,t.t0=t["catch"](0),t.abrupt("return",null);case 16:case"end":return t.stop()}}),t,this,[[0,13]])})));function e(e){return t.apply(this,arguments)}return e}()}]),t}(),rt=ot,ct={state:{window:window,userName:"",instance:null,anyUnvoted:!0,discuss:"idle",room:"",socket:null,vote:"",topic:"",timer:null,time:"",dialogs:{},repoConnect:!1,iAmRepoConnect:!1,githubToken:"",githubUser:"",githubCli:new rt,githubData:{owner:"",repo:"",repos:[],issues:[],labels:[],page:1,topicIssue:null}},mutations:{setIAmRepoConnect:function(t,e){t.iAmRepoConnect=e},setTopicIssue:function(t,e){t.githubData.topicIssue=e},setRepos:function(t,e){t.githubData.repos=e},setRepo:function(t,e){t.githubData.repo=e},setIssues:function(t,e){t.githubData.issues=e},setLabels:function(t,e){t.githubData.labels=e},setTimer:function(t,e){t.timer=e},setTime:function(t,e){t.time=e},setRoom:function(t,e){t.room=e},setUserName:function(t,e){t.userName=e},setSocket:function(t,e){t.socket=e},setDialog:function(t,e){et["a"].registerDialog(e.element),t.dialogs[e.name]=e.element},setInstance:function(t,e){t.instance=e;var s=!1;if(e.hasOwnProperty("players")&&Object.keys(e.players).forEach((function(a){""==e.players[a].vote&&(s=!0),a===t.socket.id&&(t.vote=e.players[a].vote,t.userName=e.players[a].name,t.iAmRepoConnect=e.players[a].repoConnect)})),t.anyUnvoted=s,t.discuss=e.discuss,t.topic=e.topic,t.githubData=e.githubData,"discuss"===t.discuss&&null===t.timer){t.timer={sec:0,getSec:function(){var e=new Date(null);return e.setSeconds(t.timer.sec),e.getUTCMinutes()+":"+e.getUTCSeconds()}};var a=setInterval((function(){t.timer?(t.timer.sec+=1,t.time=t.timer.getSec()):clearInterval(a)}),1e3)}(!t.anyUnvoted&&"discuss"===t.discuss||"result"===t.discuss)&&null!==t.timer&&(t.timer=null),"idle"===t.discuss&&(t.time="")}},actions:{setRepoConnect:function(t,e){t.state.socket.emit("update",t.state.room,"repoConnect",e)},setLabels:function(t){var e=function e(s,a){var l=t.state.githubData.repo;l&&t.state.githubCli.getLabels(l,s).then((function(l){if(l.length)a=a.concat(l),e(s+1,a);else{a=a.filter((function(t){return t.name.match(/.*\[.+\].*/)}));var n=t.state.githubData;n.labels=a,t.state.socket.emit("updateRoom",t.state.room,{githubData:n})}}))};e(1,[])},setTimer:function(t,e){t.commit("setTimer",e)},setTime:function(t,e){t.commit("setTime",e)},setRoom:function(t,e){t.commit("setRoom",e)},setOwner:function(t,e){var s=t.state.githubData;s.owner=e,t.state.socket.emit("updateRoom",t.state.room,{githubData:s})},setRepos:function(t,e){var s=t.state.githubData;s.repos=e,t.state.socket.emit("updateRoom",t.state.room,{githubData:s})},setRepo:function(t,e){var s=t.state.githubData;s.repo=e,t.state.socket.emit("updateRoom",t.state.room,{githubData:s})},setIssues:function(t,e){var s=t.state.githubData;s.issues=e,t.state.socket.emit("updateRoom",t.state.room,{githubData:s})},setUserName:function(t,e){t.commit("setUserName",e)},setInstance:function(t,e){t.commit("setInstance",e)},setSocket:function(t,e){t.commit("setSocket",e)},setDialog:function(t,e){t.commit("setDialog",e)},setTopic:function(t,e){t.state.socket.emit("topic",t.state.room,e)},setTopicIssue:function(t,e){var s=t.state.githubData;s.topicIssue=e,t.state.socket.emit("updateRoom",t.state.room,{topic:e.html_url,githubData:s})},initRoom:function(t){var e=window.location.pathname.match(/\/room\/(.+)/),s=null;s=e&&2===e.length?e[1]:"default",t.commit("setRoom",s)},initSocket:function(t){var e=at()("/pocker",{transports:["websocket"],upgrade:!1});window.addEventListener("unload",(function(){e&&e.close()})),e.on("connect",(function(){t.state.dialogs.start.close();var s=window.localStorage.getItem("pocker_name"),a=window.localStorage.getItem("pocker_data");s?e.emit("update",t.state.room,"name",s):t.state.dialogs.name.showModal(),a&&(a=JSON.parse(a)),t.state.githubCli.fromObject(a).then((function(e){e&&(t.dispatch("setRepoConnect",!0),t.state.githubUser=t.state.githubCli.user,t.state.githubToken=t.state.githubCli.token,t.dispatch("setOwner",t.state.githubCli.owner),t.state.githubCli.getRepos().then((function(e){t.dispatch("setRepos",e)})),t.dispatch("setLabels"))}))})),e.on("error",(function(){t.state.dialogs.error.showModal()})),e.on("disconnect",(function(){t.state.dialogs.error.showModal()})),e.on("status",(function(e){t.dispatch("setInstance",e)}));var s=function t(){setTimeout((function(){e.emit("liveness"),t()}),3e4)};s(),t.commit("setSocket",e)}}},dt=ct;a["a"].config.productionTip=!1,a["a"].use(tt["a"]),new a["a"]({store:new tt["a"].Store(dt),render:function(t){return t(Z)}}).$mount("#app")},"5c0b":function(t,e,s){"use strict";var a=s("9c0c"),l=s.n(a);l.a},"9c0c":function(t,e,s){},f191:function(t,e,s){t.exports=s.p+"assets/img/waiting.ef8d4e6b.gif"}});
//# sourceMappingURL=app.5e5198f5.js.map